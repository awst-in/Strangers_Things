{"version":3,"sources":["api/index.js","components/AccountForm.js","components/Posts.js","components/SinglePost.js","components/Navigation.js","components/PostForm.js","components/DeletePost.js","components/SendMessage.js","components/Profile.js","index.js"],"names":["callApi","a","url","method","token","body","options","toUpperCase","headers","JSON","stringify","fetch","BASE_URL","response","json","data","error","console","AccountForm","action","setToken","useState","username","setUsername","password","setPassword","isLogin","title","oppositeTitle","oppositeAction","history","useHistory","handleSubmit","event","preventDefault","user","localStorage","setItem","push","Container","style","padding","onSubmit","type","placeholder","value","required","onChange","target","Button","variant","to","styles","searchContainer","display","justifyContent","alignItems","searchInput","margin","Posts","posts","useParams","postId","searchTerm","setSearchTerm","postsToDisplay","filter","post","searchTermLower","toLowerCase","description","location","author","includes","postMatches","length","map","Card","width","onClick","_id","SinglePost","setPosts","userData","find","isUser","price","willDeliver","linkStyle","textDecoration","color","Navigation","handleClick","removeItem","window","reload","Navbar","bg","sticky","Brand","Nav","className","Link","PostForm","newPost","setNewPost","isEdit","API_URL","filteredPosts","postFieldChange","property","checked","rows","DeletePost","SendMessage","userMessage","setUserMessage","message","content","Col","sm","Profile","myMessages","setMyMessages","open","setOpen","getMessages","messageArr","messages","log","Collapse","in","dimension","minHeight","fromUser","App","setUserData","setMessages","fetchUserData","fetchPosts","useEffect","getItem","exact","path","ReactDOM","render","document","getElementById"],"mappings":"sMAIaA,EAAO,uCAAG,yCAAAC,EAAA,6DAASC,EAAT,EAASA,IAAKC,EAAd,EAAcA,OAAQC,EAAtB,EAAsBA,MAAOC,EAA7B,EAA6BA,KAA7B,SAEbC,EAAU,CACdH,OAAQA,EAASA,EAAOI,cAAgB,MACxCC,QAAS,CACP,eAAgB,oBAElBH,KAAMI,KAAKC,UAAUL,IAEnBD,IACFE,EAAQE,QAAR,+BAA6CJ,IAV5B,SAcIO,MAhBJC,gEAgBoBV,EAAKI,GAdzB,cAcbO,EAda,gBAeAA,EAASC,OAfT,YAebC,EAfa,QAiBVC,MAjBU,uBAiBGD,EAAKC,MAjBR,iCAkBZD,GAlBY,kCAoBnBE,QAAQD,MAAM,UAAd,MApBmB,0DAAH,sD,uBCuDLE,EAtDK,SAAC,GAA0B,IAAxBC,EAAuB,EAAvBA,OAAQC,EAAe,EAAfA,SAC7B,EAAgCC,mBAAS,IAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAAgCF,mBAAS,IAAzC,mBAAOG,EAAP,KAAiBC,EAAjB,KACMC,EAAqB,UAAXP,EACVQ,EAAQD,EAAU,QAAU,WAC5BE,EAAgBF,EAAU,YAAc,2BACxCG,EAAiBH,EAAU,WAAa,QACxCI,EAAUC,cAEVC,EAAY,uCAAG,WAAOC,GAAP,mBAAAhC,EAAA,6DACnBgC,EAAMC,iBADa,SAEAlC,EAAQ,CACzBE,IAAI,UAAD,OAAYiB,GACfd,KAAM,CAAE8B,KAAM,CAAEb,WAAUE,aAC1BrB,OAAQ,SALS,OAEbY,EAFa,QAObX,EAPa,OAOLW,QAPK,IAOLA,GAPK,UAOLA,EAAMA,YAPD,aAOL,EAAYX,SAGxBgC,aAAaC,QAAQ,QAASjC,GAC9BmB,EAAY,IACZE,EAAY,IACZL,EAAShB,GACT0B,EAAQQ,KAAK,MAdI,2CAAH,sDAmBlB,OACE,mCACA,eAACC,EAAA,EAAD,CAAWC,MAAO,CAACC,QAAS,OAA5B,UACE,6BAAKd,IACL,uBAAMe,SAAUV,EAAhB,UACE,uBACEW,KAAK,OACLC,YAAY,WACZC,MAAOvB,EACPwB,UAAQ,EACRC,SAAU,SAACd,GAAD,OAAWV,EAAYU,EAAMe,OAAOH,UAEhD,uBACEF,KAAK,WACLC,YAAY,WACZC,MAAOrB,EACPuB,SAAU,SAACd,GAAD,OAAWR,EAAYQ,EAAMe,OAAOH,UACtC,IAAI,uBACd,cAACI,EAAA,EAAD,CAAQC,QAAQ,YAAYP,KAAK,SAAjC,SAA2ChB,OAE7C,cAAC,IAAD,CAAMwB,GAAE,WAAMtB,GAAd,SAAiCD,U,QCjDjCwB,EAAS,CACbC,gBAAiB,CACfC,QAAS,OACTC,eAAgB,SAChBd,QAAS,EACTe,WAAY,UAEdC,YAAa,CACXC,OAAQ,WAgEGC,EA1CD,SAAC,GAAe,IAAbC,EAAY,EAAZA,MACT9B,EAAUC,cAGhB,GAFmB8B,cAAXC,OAE4BzC,mBAAS,KAA7C,mBAAO0C,EAAP,KAAmBC,EAAnB,KAEMC,EAAiBL,EAAMM,QAAO,SAACC,GAAD,OAxBlB,SAACA,EAAMJ,GAWzB,IAVA,IAAMK,EAAkBL,EAAWM,cAUnC,MAFgB,CAFZF,EAJFG,YAIEH,EAHFI,SAGEJ,EAFFxC,MAEEwC,EADFK,OAAUlD,UAKZ,eACE,GADc,KACJ+C,cAAcI,SAASL,GAC/B,OAAO,EAWmCM,CAAYP,EAAMJ,MAEhE,OACE,qCACE,sBAAKvB,MAAOY,EAAOC,gBAAnB,UACE,uCACA,uBACEb,MAAOY,EAAOK,YACdd,KAAK,OACLC,YAAY,mBACZC,MAAOkB,EACPhB,SAAU,SAACd,GAET+B,EAAc/B,EAAMe,OAAOH,aAIhCoB,EAAeU,OACdV,EAAeW,KAAI,SAACT,GAAD,OACjB,cAACU,EAAA,EAAD,CAAMrC,MAAO,CAAEsC,MAAO,QAAtB,SACE,sBAAoBtC,MAAO,CAAEsC,MAAO,OAAQrC,QAAS,QAArD,UACE,6BAAK0B,EAAKxC,QACV,8CAAiBwC,EAAKK,OAAOlD,YAC7B,gDAAmB6C,EAAKG,eACxB,6CAAgBH,EAAKI,YACrB,cAACtB,EAAA,EAAD,CAAQC,QAAQ,YAAY6B,QAAS,kBAAMjD,EAAQQ,KAAR,iBAAuB6B,EAAKa,OAAvE,yBALQb,EAAKa,UAUnB,0DCpBOC,EA7CI,SAAC,GAA0C,IAAxCrB,EAAuC,EAAvCA,MAAOxD,EAAgC,EAAhCA,MAAO8E,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,SACpCrB,EAAWD,cAAXC,OACFhC,EAAUC,cAEVoC,EAAOP,EAAMwB,MAAK,SAACjB,GAAD,OAAUL,IAAWK,EAAKa,OAG5CK,EAASF,EAAS7D,WAAa6C,EAAKK,OAAOlD,SAEjD,OACE,mCACG6C,EACC,8BACE,eAAC5B,EAAA,EAAD,WACA,6BAAK4B,EAAKxC,QACV,4CAAewC,EAAKK,OAAOlD,YAC3B,wCAAW6C,EAAKmB,SAChB,2CAAcnB,EAAKI,YACnB,2CAAcJ,EAAKoB,YAAc,MAAQ,QACxCF,EACC,qCACE,cAACpC,EAAA,EAAD,CAAQC,QAAQ,YAAY6B,QAAS,kBAAMjD,EAAQQ,KAAR,UAAgBwB,EAAhB,WAA3C,kBAEU,IACV,cAAC,EAAD,CAAY1D,MAAOA,EAAO0D,OAAQA,EAAQoB,SAAUA,OAGtD,GAED9E,EACC,mCACIiF,EAAyD,GAAhD,cAAC,EAAD,CAAajF,MAAOA,EAAO0D,OAAQA,MAGhD,QAKJ,M,gBCtCF0B,EAAY,CAChBlC,QAAS,OACTI,OAAQ,OACR+B,eAAgB,OAChBC,MAAO,QACPlC,WAAY,YAmDCmC,EAhDI,SAAC,GAAe,IAAbvF,EAAY,EAAZA,MACd0B,EAAUC,cACV6D,EAAW,uCAAG,sBAAA3F,EAAA,sDAClBmC,aAAayD,WAAW,SACxB/D,EAAQQ,KAAK,KACbwD,OAAOvB,SAASwB,QAAO,GAHL,2CAAH,qDAMjB,OACE,mCACE,eAACC,EAAA,EAAD,CAAQC,GAAG,YAAY/C,QAAQ,YAAYgD,OAAO,MAAlD,UACE,cAACF,EAAA,EAAOG,MAAR,gCACA,eAACC,EAAA,EAAD,CAAKC,UAAU,UAAf,UACE,cAACD,EAAA,EAAIE,KAAL,CAAUnD,GAAG,IAAb,SACE,cAAC,IAAD,CAAMA,GAAG,IAAIX,MAAOgD,EAApB,qBAEF,uBACEpF,EAKA,qCACE,cAACgG,EAAA,EAAIE,KAAL,UACE,cAAC,IAAD,CAAMnD,GAAG,WAAWX,MAAOgD,EAA3B,uBAGF,uBAEA,cAACY,EAAA,EAAIE,KAAL,UACE,cAAC,IAAD,CAAMnD,GAAG,aAAaX,MAAOgD,EAA7B,wBAGF,uBAEA,cAACY,EAAA,EAAIE,KAAL,UACE,cAAC,IAAD,CAAMnD,GAAG,IAAIX,MAAOgD,EAAWT,QAASa,EAAxC,yBAlBJ,cAACQ,EAAA,EAAIE,KAAL,UACE,cAAC,IAAD,CAAMnD,GAAG,SAASX,MAAOgD,EAAzB,8B,sBCkFCe,EA9GE,SAAC,GAAwC,IAAtCnG,EAAqC,EAArCA,MAAO8E,EAA8B,EAA9BA,SAAUtB,EAAoB,EAApBA,MAAOzC,EAAa,EAAbA,OAChC2C,EAAWD,cAAXC,OACFhC,EAAUC,cAEhB,EAA8BV,mBAAS,CACnCM,MAAO,GACP2C,YAAa,GACbgB,MAAO,EACPf,SAAU,GACVgB,aAAa,IALjB,mBAAOiB,EAAP,KAAgBC,EAAhB,KAOMC,EAAoB,SAAXvF,EACTQ,EAAQ+E,EAAS,iBAAmB,iBACpCvG,EAASuG,EAAS,QAAU,OAC5BC,EAAUD,EAAM,iBAAa5C,GAAb,SAElB9B,EAAY,uCAAG,WAAOC,GAAP,mBAAAhC,EAAA,6DAEnBgC,EAAMC,iBAFa,kBAOLlC,EAAQ,CACdE,IAAKyG,EACLxG,OAAQA,EACRE,KAAM,CACF8D,KAAM,CACNxC,MAAO6E,EAAQ7E,MACf2C,YAAakC,EAAQlC,YACrBgB,MAAOkB,EAAQlB,MACff,SAAUiC,EAAQjC,SAClBgB,YAAaiB,EAAQjB,cAGzBnF,UAnBW,gBAMH+D,EANG,EAMXpD,KAAQoD,KAeTuC,GACOE,EAAgBhD,EAAMM,QAAO,SAACC,GAAD,OAASA,EAAKa,MAAQlB,KACzDoB,EAAS,GAAD,mBAAK0B,GAAL,CAAoBzC,MAE5Be,EAAS,GAAD,mBAAKtB,GAAL,CAAYO,KAExBrC,EAAQQ,KAAK,UA3BE,kDA6BfrB,QAAQD,MAAM,wBAAd,MA7Be,0DAAH,sDAiCZ6F,EAAkB,SAACC,GAAD,OAAc,SAAC7E,GAGjCwE,EADY,gBAAbK,EACY,2BAAIN,GAAL,kBAAeM,EAAW7E,EAAMe,OAAO+D,UAEtC,2BAAIP,GAAL,kBAAeM,EAAW7E,EAAMe,OAAOH,WAIvD,OACE,cAACN,EAAA,EAAD,UACA,gCACI,6BAAKZ,IACP,uBAAMe,SAAUV,EAAhB,UACE,uBACEW,KAAK,OACLC,YAAY,gBACZC,MAAO2D,EAAQ7E,MACfoB,SAAU8D,EAAgB,WAE5B,uBAEA,0BACElE,KAAK,OACLqE,KAAK,IACLpE,YAAY,cACZC,MAAO2D,EAAQlC,YACfvB,SAAU8D,EAAgB,iBAE5B,uBAEA,uBACElE,KAAK,SACLC,YAAY,gBACZC,MAAO2D,EAAQlB,MACfvC,SAAU8D,EAAgB,WAE5B,uBAEA,uBACElE,KAAK,OACLC,YAAY,WACZC,MAAO2D,EAAQjC,SACfxB,SAAU8D,EAAgB,cAE5B,uBACA,6CACA,uBACElE,KAAK,WACLE,MAAO2D,EAAQjB,YACfxC,SAAU8D,EAAgB,iBAE5B,uBAECzG,EAAQ,cAAC6C,EAAA,EAAD,CAAQC,QAAQ,YAAYP,KAAK,SAAjC,SAA2ChB,IAAkB,YC3E/DsF,EA5BI,SAAC,GAAe,IAAb7G,EAAY,EAAZA,MACd0B,EAAUC,cACR+B,EAAWD,cAAXC,OAEF6C,EAAO,iBAAa7C,GAEpB8B,EAAW,uCAAG,sBAAA3F,EAAA,+EAEVD,EAAQ,CACZE,IAAKyG,EACLxG,OAAQ,SACRC,UALc,OAOhB0B,EAAQQ,KAAK,KAEbwD,OAAOvB,SAASwB,QAAO,GATP,gDAWhB9E,QAAQD,MAAM,yBAAd,MAXgB,yDAAH,qDAejB,OACE,mCACE,cAACiC,EAAA,EAAD,CAAQC,QAAQ,YAAY6B,QAASa,EAArC,4B,QCyBSsB,EAhDK,SAAC,GAAe,IAAb9G,EAAY,EAAZA,MACrB,EAAsCiB,mBAAS,IAA/C,mBAAO8F,EAAP,KAAoBC,EAApB,KAEQtD,EAAWD,cAAXC,OACFhC,EAAUC,cAEV4E,EAAO,iBAAa7C,EAAb,aAGP9B,EAAY,uCAAG,WAAOC,GAAP,SAAAhC,EAAA,6DACnBgC,EAAMC,iBADa,kBAIXlC,EAAQ,CACZE,IAAKyG,EACLxG,OARS,OASTE,KAAM,CAAEgH,QAAS,CAAEC,QAAQ,GAAD,OAAKH,KAC/B/G,UARe,OAUjB0B,EAAQQ,KAAR,KAViB,gDAYjBrB,QAAQD,MAAM,0BAAd,MAZiB,yDAAH,sDAgBlB,OACE,mCACGZ,EACC,uBAAMsC,SAAUV,EAAhB,UACE,cAACuF,EAAA,EAAD,CAAKC,GAAG,IAAR,SACE,0BACE7E,KAAK,OACLqE,KAAK,IACLpE,YAAY,UACZC,MAAOsE,EACPpE,SAAU,SAACd,GAAD,OAAWmF,EAAenF,EAAMe,OAAOH,YAGrD,uBACA,cAACI,EAAA,EAAD,CAAQC,QAAQ,YAAhB,qBAGF,M,QCSOuE,EApDC,SAAC,GAAyB,IAAvBrH,EAAsB,EAAtBA,MAAO+E,EAAe,EAAfA,SACxB,EAAoC9D,mBAAS,IAA7C,mBAAOqG,EAAP,KAAmBC,EAAnB,KACA,EAAwBtG,oBAAS,GAAjC,mBAAOuG,EAAP,KAAaC,EAAb,KAIMC,EAAW,uCAAG,WAAO7F,GAAP,iBAAAhC,EAAA,6DAClBgC,EAAMC,iBACN2F,GAASD,GAFS,kBAIG5H,EAAQ,CACzBE,IAPO,YAQPE,UANc,OAIVW,EAJU,OAQVgH,EAAahH,EAAKA,KAAKiH,SAC7B/G,QAAQgH,IAAI,QAASlH,GACrB4G,EAAcI,GAVE,kDAYhB9G,QAAQD,MAAR,MAZgB,0DAAH,sDAgBjB,OACE,mCACE,cAACuB,EAAA,EAAD,UACE,gCACE,wCAAW4C,EAAS7D,SAApB,OACA,cAAC2B,EAAA,EAAD,CACEC,QAAQ,YACR6B,QAAS+C,EACT,gBAAc,wBACd,gBAAeF,EAJjB,0BAQCF,EAAW9C,KAAI,SAACyC,GAAD,OACd,cAACa,EAAA,EAAD,CAAUC,GAAIP,EAAMQ,UAAU,QAA9B,SACE,cAACvD,EAAA,EAAD,CAAMxE,MAAI,EAACmC,MAAO,CAAEsC,MAAO,OAASuB,UAAU,OAA9C,SACE,sBAAuB7D,MAAO,CAAE6F,UAAW,SAA3C,UACE,wCAAWhB,EAAQiB,SAAShH,YAC5B,wCAAW+F,EAAQlD,KAAKxC,SACxB,kCAAK0F,EAAQC,QAAb,SAHQD,EAAQrC,oBCnC5BuD,G,MAAM,WACV,MAA0BlH,mBAAS,IAAnC,mBAAOjB,EAAP,KAAcgB,EAAd,KACA,EAAgCC,mBAAS,IAAzC,mBAAO8D,EAAP,KAAiBqD,EAAjB,KACA,EAA0BnH,mBAAS,IAAnC,mBAAOuC,EAAP,KAAcsB,EAAd,KACA,EAAgC7D,mBAAS,IAAzC,mBAAO2G,EAAP,KAAiBS,EAAjB,KAEMC,EAAa,uCAAG,WAAOtI,GAAP,iBAAAH,EAAA,sEACGD,EAAQ,CAC7BE,IAAK,YACLE,UAHkB,uBACZW,EADY,EACZA,KADY,kBAKbA,GALa,2CAAH,sDAQb4H,EAAU,uCAAG,8BAAA1I,EAAA,sEAGPD,EAAQ,CAChBE,IAAK,WAJU,uBAEP0D,EAFO,EAEf7C,KAAQ6C,MAFO,kBAMVA,GANU,2CAAH,qDAsBhB,OAbAgF,oBAAS,sBAAC,8BAAA3I,EAAA,sEACY0I,IADZ,UACF/E,EADE,OAERsB,EAAStB,GACJxD,EAHG,uBAINgB,EAASgB,aAAayG,QAAQ,UAJxB,0CAOWH,EAActI,GAPzB,QAOFW,EAPE,SAQIA,EAAKO,UACfkH,EAAYzH,GATN,4CAWP,CAACX,IAGF,qCACE,cAAC,EAAD,CAAYA,MAAOA,EAAOgB,SAAUA,EAAU+D,SAAUA,EAAUqD,YAAaA,IAC/E,eAAC,IAAD,WACE,cAAC,IAAD,CAAOM,OAAK,EAACC,KAAK,IAAlB,SACE,cAAC,EAAD,CAAOnF,MAAOA,EAAOxD,MAAOA,MAE9B,cAAC,IAAD,CAAO0I,OAAK,EAACC,KAAK,WAAlB,SACE,cAAC,EAAD,CAASf,SAAUA,EAAU5H,MAAOA,EAAO+E,SAAUA,MAEvD,cAAC,IAAD,CAAO2D,OAAK,EAACC,KAAK,SAAlB,SACE,cAAC,EAAD,CAAOnF,MAAOA,EAAOxD,MAAOA,MAE9B,cAAC,IAAD,CAAO2I,KAAK,aAAZ,SACG3I,EACC,cAAC,EAAD,CAAUA,MAAOA,EAAO8E,SAAUA,EAAUtB,MAAOA,EAAOzC,OAAO,QAEjE,yCAGJ,cAAC,IAAD,CAAO4H,KAAK,sBAAZ,SACG3I,EAAQ,cAAC,EAAD,CAAUA,MAAOA,EAAO8E,SAAUA,EAAUtB,MAAOA,EAAOzC,OAAO,SAAY,KAExF,cAAC,IAAD,CAAO4H,KAAK,iBAAZ,SACE,cAAC,EAAD,CAAYnF,MAAOA,EAAOxD,MAAOA,EAAO+E,SAAUA,MAEpD,cAAC,IAAD,CAAO4D,KAAK,0BAAZ,SACG3I,EACC,cAAC,EAAD,CAAawD,MAAOA,EAAOxD,MAAOA,EAAO4H,SAAUA,EAAUS,YAAaA,IAE1E,KAGJ,cAAC,IAAD,CAAOM,KAAK,YAAZ,SACE,cAAC,EAAD,CAAa5H,OAAO,WAAWC,SAAUA,EAAUoH,YAAaA,MAElE,cAAC,IAAD,CAAOO,KAAK,SAAZ,SACI3I,EAGA,qCACE,6DACA,0BAJF,cAAC,EAAD,CAAae,OAAO,QAAQC,SAAUA,EAAUoH,YAAaA,cAazEQ,IAASC,OACP,cAAC,IAAD,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,U","file":"static/js/main.274c17ba.chunk.js","sourcesContent":["export const BASE_URL = 'https://strangers-things.herokuapp.com/api/';\nexport const COHORT_NAME = '2108-LSU-RM-WEB-PT';\nexport const API_URL = BASE_URL + COHORT_NAME;\n\nexport const callApi = async ({ url, method, token, body }) => {\n  try {\n    const options = {\n      method: method ? method.toUpperCase() : 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(body),\n    };\n    if (token) {\n      options.headers['Authorization'] = `Bearer ${token}`;\n    }\n    // console.log('Call API Request URL: ', API_URL + url);\n    // console.log('Call API Options: ', options);\n    const response = await fetch(API_URL + url, options);\n    const data = await response.json();\n    // console.log('data: ', data);\n    if (data.error) throw data.error;\n    return data;\n  } catch (error) {\n    console.error('ERROR: ', error);\n  }\n};","import React, { useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { callApi } from '../api';\nimport { Container, Button } from 'react-bootstrap'\n\nconst AccountForm = ({ action, setToken }) => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const isLogin = action === 'login';\n  const title = isLogin ? 'Login' : 'Register';\n  const oppositeTitle = isLogin ? 'New user?' : 'Already have an account?';\n  const oppositeAction = isLogin ? 'register' : 'login';\n  const history = useHistory();\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    const data = await callApi({\n      url: `/users/${action}`,\n      body: { user: { username, password } },\n      method: 'POST',\n    });\n    const token = data?.data?.token;\n    // console.log(token);\n    if (token) {\n      localStorage.setItem('token', token);\n      setUsername('');\n      setPassword('');\n      setToken(token);\n      history.push('/');\n    }\n  };\n\n\n  return (\n    <>\n    <Container style={{padding: '1px'}}>\n      <h2>{title}</h2>\n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"text\"\n          placeholder=\"username\"\n          value={username}\n          required\n          onChange={(event) => setUsername(event.target.value)}\n        ></input>\n        <input\n          type=\"password\"\n          placeholder=\"password\"\n          value={password}\n          onChange={(event) => setPassword(event.target.value)}\n        ></input>{' '}<br />\n        <Button variant='secondary' type=\"submit\">{title}</Button>\n      </form>\n      <Link to={`/${oppositeAction}`}>{oppositeTitle}</Link>\n      </Container>\n    </>\n  );\n};\n\nexport default AccountForm;","import React, { useState } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { Card, Button } from 'react-bootstrap';\n\nconst styles = {\n  searchContainer: {\n    display: 'flex',\n    justifyContent: 'center',\n    padding: 0,\n    alignItems: 'center',\n  },\n  searchInput: {\n    margin: '0 16px',\n  },\n};\n\nconst postMatches = (post, searchTerm) => {\n  const searchTermLower = searchTerm.toLowerCase();\n  const {\n    description,\n    location,\n    title,\n    author: { username }\n  } = post;\n\n  const toMatch = [description, location, title, username];\n\n  for (const field of toMatch) {\n    if (field.toLowerCase().includes(searchTermLower)) {\n      return true;\n    }\n  }\n};\n\nconst Posts = ({ posts }) => {\n  const history = useHistory();\n  const { postId } = useParams();\n\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const postsToDisplay = posts.filter((post) => postMatches(post, searchTerm));\n\n  return (\n    <>\n      <div style={styles.searchContainer}>\n        <h2>Posts</h2>\n        <input\n          style={styles.searchInput}\n          type='text'\n          placeholder='search for posts'\n          value={searchTerm}\n          onChange={(event) => {\n            // console.log(event.target.value);\n            setSearchTerm(event.target.value);\n          }}\n        ></input>\n      </div>\n      {postsToDisplay.length ? (\n        postsToDisplay.map((post) => (\n          <Card style={{ width: 'auto' }}>\n            <div key={post._id} style={{ width: 'auto', padding: '10px' }}>\n              <h5>{post.title}</h5>\n              <div>Posted by: {post.author.username}</div>\n              <div>Description: {post.description}</div>\n              <div>Location: {post.location}</div>\n              <Button variant='secondary' onClick={() => history.push(`/posts/${post._id}`)}>View Post</Button>\n            </div>\n          </Card>\n        ))\n      ) : (\n        <div>No posts to display</div>\n      )}\n    </>\n  );\n};\n\nexport default Posts;\n","import React from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport { DeletePost, SendMessage } from '.';\nimport { Button, Container } from 'react-bootstrap';\n\nconst SinglePost = ({ posts, token, setPosts, userData }) => {\n  const { postId } = useParams();\n  const history = useHistory();\n\n  const post = posts.find((post) => postId === post._id);\n  // console.log('SINGLE POST', post);\n\n  const isUser = userData.username === post.author.username;\n\n  return (\n    <>\n      {post ? (\n        <div>\n          <Container>\n          <h3>{post.title}</h3>\n          <p>Posted by: {post.author.username}</p>\n          <p>Price: {post.price}</p>\n          <p>Location: {post.location}</p>\n          <p>Delivers: {post.willDeliver ? 'Yes' : 'No'}</p>\n          {isUser ? (\n            <>\n              <Button variant='secondary' onClick={() => history.push(`${postId}/edit`)}>\n                Edit\n              </Button>{' '}\n              <DeletePost token={token} postId={postId} setPosts={setPosts} />\n            </>\n          ) : (\n            ''\n          )}\n          {token ? (\n            <>\n              {!isUser ? <SendMessage token={token} postId={postId} /> : ''}\n            </>\n          ) : (\n            ''\n          )}\n      </Container>\n        </div>\n      ) : (\n        ''\n      )}\n    </>\n  );\n};\n\nexport default SinglePost;\n","import React from 'react';\nimport { BrowserRouter as Router, Link } from 'react-router-dom';\nimport { useHistory } from 'react-router-dom';\nimport { Navbar, Nav } from 'react-bootstrap';\n\n\nconst linkStyle = {\n  display: 'flex',\n  margin: 'auto',\n  textDecoration: 'none',\n  color: 'black',\n  alignItems: 'flex-end'\n}\n\nconst Navigation = ({ token }) => {\n  const history = useHistory();\n  const handleClick = async () => {\n    localStorage.removeItem('token');\n    history.push('/');\n    window.location.reload(false);\n  };\n\n  return (\n    <>\n      <Navbar bg='secondary' variant='secondary' sticky='top'>\n        <Navbar.Brand>Stranger's Things</Navbar.Brand>\n        <Nav className='me-auto'>\n          <Nav.Link to='/'>\n            <Link to='/' style={linkStyle}>Home </Link>\n          </Nav.Link>\n          <br />\n          {!token ? (\n            <Nav.Link>\n              <Link to='/login' style={linkStyle}>Login</Link>\n            </Nav.Link>\n          ) : (\n            <>\n              <Nav.Link>\n                <Link to='/profile' style={linkStyle}>Profile</Link>\n              </Nav.Link>\n\n              <br />\n\n              <Nav.Link>\n                <Link to='/posts/new' style={linkStyle}>Add Post</Link>\n              </Nav.Link>\n\n              <br />\n\n              <Nav.Link>\n                <Link to='/' style={linkStyle} onClick={handleClick}>\n                  Logout\n                </Link>\n              </Nav.Link>\n            </>\n          )}\n        </Nav>\n      </Navbar>\n    </>\n  );\n};\n\nexport default Navigation;\n","import React, { useState } from 'react';\nimport { callApi } from '../api';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { Button, Container } from 'react-bootstrap';\n\nconst PostForm = ({ token, setPosts, posts, action }) => {\n    const { postId } = useParams();\n    const history = useHistory();\n\n    const [newPost, setNewPost] = useState({\n        title: '',\n        description: '',\n        price: 0,\n        location: '',\n        willDeliver: false,\n    });\n    const isEdit = action === 'edit';\n    const title = isEdit ? 'Edit this post' : 'Add a new post';\n    const method = isEdit ? 'PATCH' : 'POST';\n    const API_URL = isEdit ? `/posts/${postId}` : `/posts`;\n\n  const handleSubmit = async (event) => {\n\n    event.preventDefault();\n    try {\n        // console.log('submitted')\n        const {\n            data: { post },\n        } = await callApi({\n            url: API_URL,\n            method: method,\n            body: {\n                post: {\n                title: newPost.title,\n                description: newPost.description,\n                price: newPost.price,\n                location: newPost.location,\n                willDeliver: newPost.willDeliver\n                },\n            },\n            token,\n            });\n        if(isEdit) {\n            const filteredPosts = posts.filter((post)=> post._id !== postId);\n            setPosts([...filteredPosts, post]);\n        } else {\n            setPosts([...posts, post]);\n        }\n        history.push('/posts');\n    } catch (error) {\n        console.error('error adding a post: ', error);\n    }\n  };\n\n  const postFieldChange = (property) => (event) => {\n\n    if(property === 'willDeliver'){\n        setNewPost({...newPost, [property]: event.target.checked})\n    } else {\n        setNewPost({...newPost, [property]: event.target.value});\n    }\n};\n\n  return (\n    <Container>\n    <div>\n        <h2>{title}</h2>\n      <form onSubmit={handleSubmit}>\n        <input\n          type='text'\n          placeholder='Title Of Post'\n          value={newPost.title}\n          onChange={postFieldChange('title')}\n        ></input>\n        <br />\n\n        <textarea\n          type='text'\n          rows='6'\n          placeholder='Description'\n          value={newPost.description}\n          onChange={postFieldChange('description')}\n        ></textarea>\n        <br />\n\n        <input\n          type='number'\n          placeholder='Price of Item'\n          value={newPost.price}\n          onChange={postFieldChange('price')}\n        ></input>\n        <br />\n\n        <input\n          type='text'\n          placeholder='Location'\n          value={newPost.location}\n          onChange={postFieldChange('location')}\n        ></input>\n        <br />\n        <label>Deliver?</label>\n        <input\n          type='checkbox'\n          value={newPost.willDeliver}\n          onChange={postFieldChange('willDeliver')}\n        ></input>\n        <br />\n\n        {token ? <Button variant='secondary' type='submit'>{title}</Button> : ''}\n      </form>\n    </div>\n    </Container>\n  );\n};\n\nexport default PostForm;\n","import React from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport { callApi } from '../api';\nimport { Button } from 'react-bootstrap'\n\nconst DeletePost = ({ token }) => {\n  const history = useHistory();\n  const { postId } = useParams();\n\n  const API_URL = `/posts/${postId}`;\n\n  const handleClick = async () => {\n    try {\n      await callApi({\n        url: API_URL,\n        method: 'DELETE',\n        token,\n      });\n      history.push('/');\n      //need to reset posts dynamically\n      window.location.reload(false);\n    } catch (error) {\n      console.error('Error deleting a post:', error);\n    }\n  };\n  \n  return (\n    <>\n      <Button variant='secondary' onClick={handleClick}>Delete Post</Button>\n    </>\n  );\n};\n\nexport default DeletePost;\n","import React, { useState } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { callApi } from '../api';\nimport { Button, Col } from 'react-bootstrap';\n\nconst SendMessage = ({ token }) => {\n  const [userMessage, setUserMessage] = useState('');\n\n  const { postId } = useParams();\n  const history = useHistory();\n\n  const API_URL = `/posts/${postId}/messages`;\n  const method = 'POST';\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    try {\n      // console.log('message sent');\n      await callApi({\n        url: API_URL,\n        method: method,\n        body: { message: { content: `${userMessage}` } },\n        token,\n      });\n      history.push(`/`);\n    } catch (error) {\n      console.error('error adding a message:', error);\n    }\n  };\n\n  return (\n    <>\n      {token ? (\n        <form onSubmit={handleSubmit}>\n          <Col sm='2'>\n            <textarea\n              type='text'\n              rows='3'\n              placeholder='Message'\n              value={userMessage}\n              onChange={(event) => setUserMessage(event.target.value)}\n            ></textarea>\n          </Col>\n          <br />\n          <Button variant='secondary'>Send</Button>\n        </form>\n      ) : (\n        ''\n      )}\n    </>\n  );\n};\n\nexport default SendMessage;\n","import React, { useState } from 'react';\nimport { callApi } from '../api';\nimport { Button, Collapse, Card, Container } from 'react-bootstrap';\n\nconst Profile = ({ token, userData }) => {\n  const [myMessages, setMyMessages] = useState([]);\n  const [open, setOpen] = useState(false);\n\n  const API_URL = `/users/me`;\n\n  const getMessages = async (event) => {\n    event.preventDefault();\n    setOpen(!open);\n    try {\n      const data = await callApi({\n        url: API_URL,\n        token,\n      });\n      const messageArr = data.data.messages;\n      console.log('data:', data);\n      setMyMessages(messageArr);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <>\n      <Container>\n        <div>\n          <h2>Hello {userData.username}!</h2>\n          <Button\n            variant='secondary'\n            onClick={getMessages}\n            aria-controls='example-collapse-text'\n            aria-expanded={open}\n          >\n            Get Messages\n          </Button>\n          {myMessages.map((message) => (\n            <Collapse in={open} dimension='width'>\n              <Card body style={{ width: '90%' }} className='mb-2'>\n                <div key={message._id} style={{ minHeight: '150px' }}>\n                  <h3>From: {message.fromUser.username}</h3>\n                  <h4>Post: {message.post.title}</h4>\n                  <p>\"{message.content}\"</p>\n                </div>\n              </Card>\n            </Collapse>\n          ))}\n        </div>\n      </Container>\n    </>\n  );\n};\n\nexport default Profile;\n","import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport { callApi } from './api';\nimport { AccountForm, Posts, SinglePost, Navigation, PostForm, SendMessage, Profile } from './components';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nconst App = () => {\n  const [token, setToken] = useState('');\n  const [userData, setUserData] = useState({});\n  const [posts, setPosts] = useState([]);\n  const [messages, setMessages] = useState([]);\n\n  const fetchUserData = async (token) => {\n    const { data } = await callApi({\n      url: '/users/me',\n      token,\n    });\n    return data;\n  };\n\n  const fetchPosts = async () => {\n    const {\n      data: { posts },\n    } = await callApi({\n      url: '/posts',\n    });\n    return posts;\n  };\n\n  useEffect(async () => {\n    const posts = await fetchPosts();\n    setPosts(posts);\n    if (!token) {\n      setToken(localStorage.getItem('token'));\n      return;\n    }\n    const data = await fetchUserData(token);\n    if (data && data.username) {\n      setUserData(data);\n    }\n  }, [token]);\n\n  return (\n    <>\n      <Navigation token={token} setToken={setToken} userData={userData} setUserData={setUserData} />\n      <Switch>\n        <Route exact path='/'>\n          <Posts posts={posts} token={token} />\n        </Route>\n        <Route exact path='/profile'>\n          <Profile messages={messages} token={token} userData={userData} />\n        </Route>\n        <Route exact path='/posts'>\n          <Posts posts={posts} token={token} />\n        </Route>\n        <Route path='/posts/new'>\n          {token ? (\n            <PostForm token={token} setPosts={setPosts} posts={posts} action='add' />\n          ) : (\n            'You must be logged in to add a post!'\n          )}\n        </Route>\n        <Route path='/posts/:postId/edit'>\n          {token ? <PostForm token={token} setPosts={setPosts} posts={posts} action='edit' /> : ''}\n        </Route>\n        <Route path='/posts/:postId'>\n          <SinglePost posts={posts} token={token} userData={userData} />\n        </Route>\n        <Route path='/posts/:postId/messages'>\n          {token ? (\n            <SendMessage posts={posts} token={token} messages={messages} setMessages={setMessages} />\n          ) : (\n            ''\n          )}\n        </Route>\n        <Route path='/register'>\n          <AccountForm action='register' setToken={setToken} setUserData={setUserData} />\n        </Route>\n        <Route path='/login'>\n          {!token ? (\n            <AccountForm action='login' setToken={setToken} setUserData={setUserData} />\n          ) : (\n            <>\n              <div>You are already logged in!</div>\n              <br />\n            </>\n          )}\n        </Route>\n      </Switch>\n    </>\n  );\n};\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('app')\n);\n"],"sourceRoot":""}