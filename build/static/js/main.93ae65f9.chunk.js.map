{"version":3,"sources":["api/index.js","components/AccountForm.js","components/Posts.js","components/SinglePost.js","components/Navbar.js","components/PostForm.js","index.js"],"names":["API_URL","BASE_URL","callApi","a","url","method","token","body","options","toUpperCase","headers","JSON","stringify","console","log","fetch","response","json","data","error","AccountForm","action","setToken","setUserData","useState","username","setUsername","password","setPassword","isLogin","title","oppositeTitle","oppositeAction","history","useHistory","handleSubmit","event","preventDefault","user","localStorage","setItem","push","onSubmit","type","placeholder","value","required","onChange","target","to","styles","searchContainer","display","justifyContent","padding","alignItems","searchInput","margin","Posts","posts","searchTerm","setSearchTerm","postsToDisplay","filter","post","searchTermLower","toLowerCase","description","location","author","includes","postMatches","style","length","map","border","onClick","_id","SinglePost","postId","useParams","find","price","willDeliver","Navbar","PostForm","props","setTitle","setDescription","priceOfItem","setPriceOfItem","setLocation","setWillDeliver","getItem","rows","htmlFor","id","App","userData","setPosts","fetchUserData","fetchPosts","useEffect","exact","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.93ae65f9.chunk.js","sourcesContent":["export const BASE_URL = 'https://strangers-things.herokuapp.com/api/';\nexport const COHORT_NAME = '2108-LSU-RM-WEB-PT';\nexport const API_URL = BASE_URL + COHORT_NAME;\n\nexport const callApi = async ({ url, method, token, body }) => {\n  //console.log('callApi: ', { url, method, token, body });\n  try {\n    const options = {\n      method: method ? method.toUpperCase() : 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(body),\n    };\n    if (token) {\n      options.headers['Authorization'] = `Bearer ${token}`;\n    }\n    console.log('Call API Request URL: ', API_URL + url);\n    console.log('Call API Options: ', options);\n    const response = await fetch(API_URL + url, options);\n    const data = await response.json();\n    console.log('data: ', data);\n    if (data.error) throw data.error;\n    return data;\n  } catch (error) {\n    console.error('ERROR: ', error);\n  }\n};","import React, { useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { callApi } from '../api';\n\nconst AccountForm = ({ action, setToken, setUserData }) => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const isLogin = action === 'login';\n  const title = isLogin ? 'Login' : 'Register';\n  const oppositeTitle = isLogin ? 'Register' : 'Login';\n  const oppositeAction = isLogin ? 'register' : 'login';\n  const history = useHistory();\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    console.log('clicked')\n    const data = await callApi({\n      url: `/users/${action}`,\n      body: { user: { username, password } },\n      method: 'POST',\n    });\n    const token = data?.data?.token;\n    console.log(token);\n    if (token) {\n      localStorage.setItem('token', token);\n      setUsername('');\n      setPassword('');\n      setToken(token);\n      history.push('/');\n    }\n  };\n\n\n  return (\n    <>\n      <h2>{title}</h2>\n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"text\"\n          placeholder=\"username\"\n          value={username}\n          required\n          onChange={(event) => setUsername(event.target.value)}\n        ></input>\n        <input\n          type=\"password\"\n          placeholder=\"password\"\n          value={password}\n          onChange={(event) => setPassword(event.target.value)}\n        ></input>\n        <button type=\"submit\">{title}</button>\n      </form>\n      <Link to={`/${oppositeAction}`}>{oppositeTitle}</Link>\n    </>\n  );\n};\n\nexport default AccountForm;","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nconst styles = {\n  searchContainer: {\n    display: 'flex',\n    justifyContent: 'center',\n    padding: '16px',\n    alignItems: 'center',\n  },\n  searchInput: {\n    margin: '0 16px',\n  },\n};\n\nconst postMatches = (post, searchTerm) => {\n  const searchTermLower = searchTerm.toLowerCase();\n  const {\n    description,\n    location,\n    title,\n    author: { username },\n  } = post;\n\n  const toMatch = [description, location, title, username];\n\n  for (const field of toMatch) {\n    if (field.toLowerCase().includes(searchTermLower)) {\n      return true;\n    }\n  }\n};\n\nconst Posts = ({ posts }) => {\n  const history = useHistory();\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const postsToDisplay = posts.filter((post) => postMatches(post, searchTerm));\n  return (\n    <>\n      <div style={styles.searchContainer}>\n        <h2>Posts</h2>\n        <input\n          style={styles.searchInput}\n          type=\"text\"\n          placeholder=\"search for posts\"\n          value={searchTerm}\n          onChange={(event) => {\n            console.log(event.target.value);\n            setSearchTerm(event.target.value);\n          }}\n        ></input>\n      </div>\n      {postsToDisplay.length ? (\n        postsToDisplay.map((post) => (\n          <div key={post._id} style={{ border: '1px solid black' }}>\n            <h5>{post.title}</h5>\n            <div>Posted by: {post.author.username}</div>\n            <div>Description: {post.description}</div>\n            <div>Location: {post.location}</div>\n            <button onClick={() => history.push(`/posts/${post._id}`)}>\n              View Post\n            </button>\n          </div>\n        ))\n      ) : (\n        <div>No posts to display</div>\n      )}\n    </>\n  );\n};\n\nexport default Posts;","import React from 'react';\nimport { useParams } from 'react-router-dom';\n\nconst SinglePost = ({ posts }) => {\n  const { postId } = useParams();\n  const post = posts.find((post) => postId === post._id);\n  console.log('SINGLE POST', post);\n  return (\n    <>\n      {post ? (\n        <div>\n          <h3>{post.title}</h3>\n          <p>Posted by: {post.author.username}</p>\n          <p>Price: {post.price}</p>\n          <p>Location: {post.location}</p>\n          <p>Delivers: {post.willDeliver ? 'Yes' : 'No'}</p>\n        </div>\n      ) : (\n        ''\n      )}\n    </>\n  );\n};\n\nexport default SinglePost;\n","import React from 'react';\n\nconst Navbar = () => {\n  return (\n    <div>\n        Navbar\n    </div>\n  );\n};\n\nexport default Navbar;\n","import React, { useState } from 'react';\n// import { callApi } from '../api';\nconst BASE_URL = 'https://strangers-things.herokuapp.com/api/2108-LSU-RM-WEB-PT/posts'\n\nconst PostForm = (props) => {\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [priceOfItem, setPriceOfItem] = useState('');\n  const [location, setLocation] = useState('');\n  const [willDeliver, setWillDeliver] = useState(false);\n\n  const handleSubmit = async (event) => {\n\n    event.preventDefault();\n\n    const token = localStorage.getItem('token');\n\n    const response = await fetch(BASE_URL, {\n        method: 'POST',\n        headers: {\n            \"Content-type\": \"application/json\",\n            \"Authorization\": `Bearer ${token}`\n        },\n        body: JSON.stringify({\n            post: {\n                title: title,\n                description: description,\n                price: priceOfItem,\n                location: location,\n                willDeliver: willDeliver\n            }\n        })\n    })\n    const data = await response.json();\n\n    console.log(\"This is our post form's data\", data);\n  }\n\n  return (\n    <div>\n      <form onSubmit={handleSubmit}>\n        <input\n          type='text'\n          placeholder='Title Of Post'\n          value={title}\n          onChange={(event) => setTitle(event.target.value)}\n        ></input>\n        <br />\n\n        <textarea\n          type='text'\n          rows='6'\n          placeholder='Description'\n          value={description}\n          onChange={(event) => setDescription(event.target.value)}\n        ></textarea>\n        <br />\n\n        <input\n          type='text'\n          placeholder='Price of Item'\n          value={priceOfItem}\n          onChange={(event) => setPriceOfItem(event.target.value)}\n        ></input>\n        <br />\n\n        <input\n          type='text'\n          placeholder='Location'\n          value={location}\n          onChange={(event) => setLocation(event.target.value)}\n        ></input>\n        <br />\n\n        <label>Will Deliver?</label>\n        <br />\n        <label htmlFor='willDeliverTrue'>True</label>\n        <input\n          type='radio'\n          id='willDeliverTrue'\n          value={true}\n          onChange={(event) => setWillDeliver(event.target.value)}\n        ></input>\n        <label htmlFor='willDeliverFalse'>False</label>\n        <input\n          type='radio'\n          id='willDeliverFalce'\n          value={false}\n          onChange={(event) => setWillDeliver(event.target.value)}\n        ></input>\n        <br />\n\n        <button type='submit'>Create New Post</button>\n      </form>\n    </div>\n  );\n};\n\nexport default PostForm;\n","import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport { callApi } from './api';\nimport { AccountForm, Posts, SinglePost, Navbar, PostForm } from './components';\n\nconst App = () => {\n  const [token, setToken] = useState('');\n  const [userData, setUserData] = useState({});\n  const [posts, setPosts] = useState([]);\n\n  const fetchUserData = async (token) => {\n    const { data } = await callApi({\n      url: '/users/me',\n      token,\n    });\n    return data;\n  };\n\n  const fetchPosts = async () => {\n    const {\n      data: { posts },\n    } = await callApi({\n      url: '/posts',\n    });\n    return posts;\n  };\n\n  useEffect(async () => {\n    const posts = await fetchPosts();\n    setPosts(posts);\n    if (!token) {\n      setToken(localStorage.getItem('token'));\n      return;\n    }\n    const data = await fetchUserData(token);\n    console.log('data:', data)\n    if (data && data.username) {\n      setUserData(data);\n    }\n  }, [token]);\n\n//   useEffect(async() => {\n//     const posts = await fetchPosts();\n//     if (posts) {\n//         setPosts(posts);\n//     };\n// }, []);\nconsole.log('token:', token)\n  return (\n    <>\n    <Navbar />\n      <h1>Stranger's Things</h1>\n      <Route exact path=\"/\">\n        <Posts posts={posts} />\n      </Route>\n      <Route exact path=\"/profile\">\n        {userData.username && <div>Hello {userData.username}</div>}\n        {token ? <PostForm /> : ''}\n      </Route>\n      <Route exact path=\"/posts\">\n        <Posts posts={posts} />\n      </Route>\n      <Route path=\"/posts/:postId\">\n        <SinglePost posts={posts} />\n      </Route>\n      <Route path=\"/register\">\n        <AccountForm\n          action=\"register\"\n          setToken={setToken}\n          setUserData={setUserData}\n        />\n      </Route>\n      <Route path=\"/login\">\n        {!token ? <AccountForm\n          action=\"login\"\n          setToken={setToken}\n          setUserData={setUserData}\n        /> : 'You are already logged in!'}\n      </Route>\n    </>\n  );\n};\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('app')\n);\n"],"sourceRoot":""}